# How does ULogViewer read and parse logs
In order to read and parse various type of logs, there is a special flow of reading and parsing logs in ULogViewer you may need to know before defining your own log profile.

![Logs reading and parsing flow](https://carina-studio.github.io/ULogViewer/Images/Log_Reading_Flow.png)


## ðŸ§±Parts Included in Reading and Parsing Logs
### Underlying Log Data
This is the original source which provides raw log data outside from ULogViewer. It may be a file, a database or output of another program.

### Log Data Source
This is the first part of ULogViewer to read raw log data into ULogViewer. 
There are various type of ```Log Data Source``` in ULogViewer to handle different type of ```Underlying Log Data```.

```Log Data Source``` reads raw log data and transforms into multiple ```Raw Log Line``` which is represented as string no matter what type of raw log data is.
It is important to know what ```Raw Log Line``` will be generated by specific ```Log Data Source``` so that you can define how to parse these ```Raw Log Line``` into actual logs.

### Log Profile
There are lots of information in ```Log Profile``` and part of them are related to logs parsing. For ex, log patterns, timestamp format, etc.

### Log Reader
Takes ```Raw Log Line``` generated by ```Log Data Source``` then parse and convert to actual logs according to information provided by ```Log Profile```.


## ðŸ—ƒLog Data Sources
### File
```File Log Data Source``` is the simplest type of ```Log Data Source``` which reads strings line by line from file directly. You can specify what encoding is used to read strings from file.

### Standard Output (stdout)
Launches a specific program and reads strings line by line in ```UTF-8``` from the standard output (stdout) of the program. 
You need to define the ```Command``` first in order to launch program and pass parameters. For ex, ```ipconfig /all``` (on Windows).
Further more, you can define extra commands which will be executed **BEFORE** or **AFTER** reading raw log data.

### HTTP/HTTPS
Sends HTTP/HTTPS request to specific URI and reads the response line by line. You can provide ```User Name``` and ```Password``` if login is needed for sending request.

### SQLite
Performs specific ```Query String``` (SQL command) and gets the result rows back. Because database result is not a set of strings, ```SQLite Log Data Source``` will transform the result into strings **COLUMN by COLUMN** and **ROW by ROW**. For ex, if the result is

Column1 | Column2 | Column3
--------|---------|--------
A       |B        |C
D       |E        |F

Then the transformation order will be:
1. A
2. B
3. C
4. D
5. E
6. F

For each column, ```SQLite Log Data Source``` will transform data to string according to the value type of column:

- If the type is ```String```, it will transform data into 3 or more lines:
  ```xml
  <ColumnName>
  Value encoded as XML string
  </ColumnName>
  ```
  
- If the type is ```Blob```, it will encode data to Base64 string and transform into 1 line:
  ```xml
  <ColumnName>Base64 encoded data</ColumnName>
  ```
  
- If the type is ```Timestamp```, it will transform into 1 line:
  ```xml
  <ColumnName>Timestamp whth format yyyy/MM/dd HH:mm:ss.ffffff</ColumnName>
  ```
  
- For other types, it will transform into 1 line:
  ```xml
  <ColumnName>Value</ColumnName>
  ```

Lets see a pratical example, if the database result is:

ID | Timestamp | Message
---|-----------|--------
1  | 1/1 10:08 | First message
2  | 1/1 10:09 | &lt;Second message&gt;

Then ```SQLite Log Data Source``` will generate the following 10 ```Raw Log Line```:

```xml
<ID>1</ID>
<Timestamp>2021/1/1 10:08:00.000000</Timestamp>
<Message>
First message
</Message>
<ID>2</ID>
<Timestamp>2021/1/1 10:09:00.000000</Timestamp>
<Message>
&lt;Second message&gt;
</Message>
```

### Windows Event Logs (Windows only)


## âš™Parsing Information Defined in Log Profile
